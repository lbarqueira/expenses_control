[![Codemagic build status](https://api.codemagic.io/apps/609ad6500a4b8b25a86253c5/609ad6500a4b8b25a86253c4/status_badge.svg)](https://codemagic.io/apps/609ad6500a4b8b25a86253c5/609ad6500a4b8b25a86253c4/latest_build)

# expenses_control

A complete Flutter application.

## References / Credits to these projects and tutorials

This project is based on the following tutorials:

### Main Reference - Inspired by:
- [Ricardo Markiewicz](https://www.youtube.com/channel/UCqMwm3oGe6BhJUOrBdfnAEA)
- [Aplicación Flutter Completa](https://www.youtube.com/playlist?list=PLntQ_VE6-lYCz2DXgVpd7yNm3opgM-mH-)
https://github.com/Gazer/como-gasto/tree/master


### Performance improvement:
- [How to improve the performance of your Flutter app](https://blog.codemagic.io/how-to-improve-the-performance-of-your-flutter-app./?s=03)


### Google Sign-In & Firebase Authentication Using Flutter
- [How to set up a Flutter app and implement Google Sign-In using Firebase authentication](https://blog.codemagic.io/firebase-authentication-google-sign-in-using-flutter/)
- [Flutter: Implementing Google Sign In](https://medium.com/flutter-community/flutter-implementing-google-sign-in-71888bca24ed)


### Dynamic and persistent theme switcher in flutter using provider and shared preferences:
- [Flutter Dynamic Persistent Theme Switcher](https://github.com/lohanidamodar/flutter_theme_provider)


### Onboarding:
- [medical_appointment](https://github.com/cybdom/medical_appointment)
- [App Onboarding Experience in Flutter](https://reime005.medium.com/app-onboarding-experience-in-flutter-90d772aaf284)


### Charts:
- package: [charts_flutter](https://pub.dev/packages/charts_flutter)
- Pie Chart example: [charts_pie_chart_ex.dart](https://github.com/X-Wei/flutter_catalog/blob/master/lib/routes/charts_pie_chart_ex.dart)
- [Flutter Tutorial - Flutter Animated Charts](https://youtu.be/GwDMwnELTP4)
- [Creating Bar Charts with Flutter using charts_flutter](https://youtu.be/Ct4Z8qpD5vY)
- [Time Series Chart example](https://github.com/X-Wei/flutter_catalog/blob/master/lib/routes/charts_time_series_ex.dart)


### Cloud Firestore:
- [Reading and Writing to Cloud Firestore with Flutter Andy Julow - Article](https://julow.com/article/5)
- [An example application for reading and writing to cloud firestore from a Flutter Application - Andy Julow](https://github.com/nhandrew/firestore_examples)
- [Is there a way to load async data on InitState method?](https://stackoverflow.com/questions/51901002/is-there-a-way-to-load-async-data-on-initstate-method)
- [Double and int problem in flutter using firebase values](https://stackoverflow.com/questions/66562279/double-and-int-problem-in-flutter-using-firebase-values)


### Splash Screen:
- package: [flutter_native_splash](https://pub.dev/packages/flutter_native_splash)
- command for first time or every time I do a change of color or image: $ flutter clean && flutter pub get && flutter pub run flutter_native_splash:create
- [Flutter Tutorial - Native Splash Screen & Real Splash Screen [2021] - Android & iOS](https://www.youtube.com/watch?v=8ME8Czqc-Oc)


### App icon:
- [Creating Android app icon - Adobe XD](https://www.youtube.com/watch?v=rK6QhWG4C5g)
- [Your First Flutter App Ep 4 - Adding App icons to Your Flutter Apps](https://youtu.be/hpQenyqxTmw)
- [Launcher icons are generated too small because of margin](https://github.com/romannurik/AndroidAssetStudio/issues/73)
- [Android Asset Studio](https://androidovshchik.github.io/AndroidAssetStudio/) with padding of 10% and background color equal to background color of App Icon


### Change App Name:
- [Change App Display Name - Flutter (Android & IOS)](https://www.youtube.com/watch?v=kzQsHzr-gjA)


### Themes:
- [provider_explained_theme](https://github.com/md-weber/provider_explained_theme)
- [Use themes to share colors and font styles](https://flutter.dev/docs/cookbook/design/themes)
- [Flutter Tutorial - Flutter Theme](https://www.youtube.com/watch?v=ju1fr9C4g4U)
- [Theming in Flutter](https://techieblossom.com/theming-in-flutter/)


### Palettes:
- [The Ultimate Guide on Designing a Dark Theme for your Android app](https://blog.prototypr.io/how-to-design-a-dark-theme-for-your-android-app-3daeb264637)
- [Color Tool - Material Design](https://material.io/resources/color/#!/?view.left=0&view.right=0)
- [Panache](https://rxlabz.github.io/panache_web/#/)


### Local Notifications:
- package: [flutter_local_notifications](https://pub.dev/packages/flutter_local_notifications#scheduling-a-notification)
- [How to convert DateTime to TZDateTime in flutter?](https://stackoverflow.com/questions/64305469/how-to-convert-datetime-to-tzdatetime-in-flutter)
- [MaikuB_flutter_local_notifications](https://github.com/MaikuB/flutter_local_notifications/blob/1fe78b9d129d674cd97cfba49734577b24c56925/flutter_local_notifications/example/lib/main.dart)
- [Flutter Local Notification, Realtime And Scheduled Push Notification For Offline Devices](https://desiprogrammer.com/blogs/flutter-local-push-notifications)


### Animations:
- package: [animations](https://pub.dev/packages/animations)
- [Flutter Tutorial - Page Transition - Container Transform Animation](https://www.youtube.com/watch?v=1nwuihDA8pE)
- [How To Animate Dialogs In Flutter? Here Is Answer](https://medium.com/flutter-community/how-to-animate-dialogs-in-flutter-here-is-answer-492ea3a7262f)
- [A Deep Dive into the Flutter Animations Package](https://verygood.ventures/blog/a-deep-dive-into-the-flutter-animations-package)
- [Page Transitions Using ThemeData in Flutter](https://medium.com/flutter-community/page-transitions-using-themedata-in-flutter-c24afadb0b5d)


### SVG Images:
- [unDraw](https://undraw.co/)
- Edition with Adobe XD (unDraw plugin)


## Important official documentation and others:

### Official:
- [FlutterFire -  The official Firebase plugins for Flutter](https://firebase.flutter.dev/)

### Others:
- [Widget Hide and Seek: A guide to managing Flutter widget’s visibility](https://danledev.medium.com/widget-hide-and-seek-a-guide-to-managing-flutter-widgets-visibility-d7977cbaf444)
- [Using SharedPreferences in Flutter](https://medium.com/flutterdevs/using-sharedpreferences-in-flutter-251755f07127)


## Firestore Database Rules
ATENTION!!!


## Git operations:
- [How can I delete a file from a Git repository?](https://stackoverflow.com/questions/2047465/how-can-i-delete-a-file-from-a-git-repository/2047477)

## Codemagic documentation:
- [Configure Firebase on Codemagic](https://medium.com/flutter-community/flutter-implementing-google-sign-in-71888bca24ed)
- [How to load Firebase config in Codemagic with environment variables [Video]](https://blog.codemagic.io/how-to-load-firebase-config-in-codemagic-with-environment-variables/)
- [Google Sign-In & Firebase Authentication Using Flutter](https://blog.codemagic.io/firebase-authentication-google-sign-in-using-flutter/)


## Gradle Documentation
[The Gradle Wrapper](https://docs.gradle.org/current/userguide/gradle_wrapper.html#gradle_wrapper)
I could not retrive SHA-1 by command $ ./gradlew signingReport  
I had to upgrade the Gradle Wrapper using $ ./gradlew wrapper --gradle-version 7.0.1, however the build did not work and I had to downgrade to 6.7.1  
$ ./gradlew wrapper --gradle-version=6.7.1  
To see the version of gradle:  
$ ./gradlew --version  

$ ./gradlew signingReport works ok!  


## Flutter's build modes

### Debug
During a typical development cycle, you test an app using flutter run at the command line, or by using the Run and Debug options in your IDE. By default, Flutter builds a debug version of your app.

$ flutter build apk --debug  
Built build\app\outputs\flutter-apk\app-debug.apk.


### Release - create an app-release.aab
- [Flutter - Build and Release an Android App | App Signing](https://www.youtube.com/watch?v=g1fByAsqQRk)
- [Build and release an Android app](https://flutter.dev/docs/deployment/android)
- [Signing the app](https://flutter.dev/docs/deployment/android#signing-the-app)  
    - Create an upload keystore:
  ```$ keytool -genkey -v -keystore c:/30daysofflutter/upload-keystore.jks -storetype JKS -keyalg RSA -keysize 2048 -validity 10000 -alias upload```  
    - Reference the keystore from the app - create (project)/android/key.properties   
    - Configure signing in gradle - Configure gradle to use your upload key when building your app in release mode by editing the (project)/android/app/build.gradle file

    - $ ./gradlew signingReport - to get the release SHA-1 and SHA256 - include the two in Firebase (/android directory)
    - $ cd .. (project directory)
    - $ flutter clean
    - $ flutter pub get
    - $ flutter build apk
    - $ flutter install (with device USB connected)

- Now with Codemagic: PASSED
  - [Android code signing - How to set up Android code signing in the Flutter workflow editor](https://docs.codemagic.io/code-signing/android-code-signing/)
  - [Option 1. Configure signing following Flutter’s documentation](https://docs.codemagic.io/code-signing/android-code-signing/#option-1-configure-signing-following-flutters-documentation)
  - [Incrementing app version using environment variables](https://docs.codemagic.io/building/build-versioning/#incrementing-app-version-using-environment-variables)


### Google Play Store Publishing (First time publishing - MANUALLY)

Until now, Codemagic CI/CD helped to generate __app-release.aab__ for play store publishing. The publishing feature of codemagic into Play Store has not been used so far. Note that, you have to launch manually at least one time at the play store, until you are able to automate the publishing process at Google play store with Codemagic.     
- __App Icon__: I have used [Android Asset Studio](https://romannurik.github.io/AndroidAssetStudio/index.html), Launcher Icon Generator to get hi-res 512x512 png to upload to Google Play Store (Interesting to note that contraire to the other [Android Asset Studio](https://androidovshchik.github.io/AndroidAssetStudio/), this does not creates a shadow on the web image)
- __Android Feature Graphic__: Used Figma to create a 1024x500 png for Android Feature Graphic to upload to Google Play Store
- __Screenshots__: Screenshots obtained through sreenshoots of the app on a real android phone.
- __Title, Short description, Full description__: Prepare earlier.

Two important videos to follow along:
- [How to Publish an Android App to Google Play 2021 | New Play Console](https://www.youtube.com/watch?v=5GHT4QtotE4)
- [Deploying Flutter App To Playstore](https://www.youtube.com/watch?v=NFTaWkUtD34)


### Very Important
- After 4 days the app is published at Google Play Store;  
- Google Sign-In didn`t work;  
- I followed this stackoverflow: [flutter google sign in not working in release when downloading from play store](https://stackoverflow.com/questions/64933084/flutter-google-sign-in-not-working-in-release-when-downloading-from-play-store)  
- SHA-1 certificate fingerprint obtained at Google Play Console at Setup / App Integrity. Add SHA-1 to Firebase.  


### NEXT STEPS...
### Modifications to the app, but in a new github branch  - the dev branch (TODO!!!)
[5 Steps for Code Changes Only on Git Branch and Merge to Master Once Done](https://www.thegeekstuff.com/2019/03/git-create-dev-branch-and-merge/)  
Once you are done with your development work on the “dev” branch, and validated your changes, you may want to merge the changes to the master branch. Merge Dev Branch to Master Branch


### Returning to Codemagic CI/CD to automate publishing at Google play store (TODO!!!)
Returning to Codemagic CI/CD:  (to automate the publishing at Google play store after first publishing previously done)
- [Deploy a Flutter app to Google Play using the Flutter workflow editor](https://docs.codemagic.io/publishing/publishing-to-google-play/)
- [Flutter CI/CD with Codemagic](https://www.youtube.com/watch?v=-09fSb2tb5U)